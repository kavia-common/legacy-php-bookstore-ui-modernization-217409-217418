{"is_source_file": true, "format": "TypeScript", "description": "Utilities for image path handling, fallback in case of image load failure, and diagnostics mode detection for images in a bookstore UI project.", "external_files": ["react"], "external_methods": ["React.SyntheticEvent<HTMLImageElement>"], "published": ["getImageSrc", "attachFallback", "useImageDiagnostics"], "classes": [], "methods": [{"name": "export function getImageSrc(candidate?: string): string { getImageSrc", "description": "Resolves an image source URL, providing a placeholder fallback and normalizing paths to the /assets/books/ directory.", "scope": "", "scopeKind": ""}, {"name": "export function attachFallback(e: React.SyntheticEvent<HTMLImageElement>, originalSrc?: string):/ attachFallback", "description": "Handles image load errors by replacing the image source with a placeholder and avoiding repeated fallbacks, also logs a warning.", "scope": "", "scopeKind": ""}, {"name": "export function useImageDiagnostics(): boolean { useImageDiagnostics", "description": "Determines if developer diagnostics mode is enabled based on environment variables, allowing for special UI badges or behaviors.", "scope": "", "scopeKind": ""}], "calls": ["console.warn"], "search-terms": ["imageUtils", "fallback", "image path normalization", "placeholder image", "react image error handling", "diagnostics mode", "bookstore assets", "image diagnostic badge"], "state": 2, "file_id": 21, "knowledge_revision": 122, "git_revision": "", "ctags": [{"_type": "tag", "name": "BOOKS_ASSET_BASE", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export const BOOKS_ASSET_BASE = '\\/assets\\/books\\/';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "PLACEHOLDER_BOOK", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export const PLACEHOLDER_BOOK = `${BOOKS_ASSET_BASE}placeholder-book.png`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "applied", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const applied = img.getAttribute('data-fallback-applied');$/", "language": "TypeScript", "kind": "constant", "scope": "attachFallback", "scopeKind": "function"}, {"_type": "tag", "name": "attachFallback", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export function attachFallback(e: React.SyntheticEvent<HTMLImageElement>, originalSrc?: string):/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const env = (import.meta as any).env || {};$/", "language": "TypeScript", "kind": "constant", "scope": "useImageDiagnostics", "scopeKind": "function"}, {"_type": "tag", "name": "failing", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^    const failing = originalSrc || img.src;$/", "language": "TypeScript", "kind": "constant", "scope": "attachFallback", "scopeKind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const flags = (env?.REACT_APP_FEATURE_FLAGS as string) || (process?.env?.REACT_APP_FEATURE_FLA/", "language": "TypeScript", "kind": "constant", "scope": "useImageDiagnostics", "scopeKind": "function"}, {"_type": "tag", "name": "getImageSrc", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export function getImageSrc(candidate?: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "img", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const img = e.currentTarget;$/", "language": "TypeScript", "kind": "constant", "scope": "attachFallback", "scopeKind": "function"}, {"_type": "tag", "name": "isDev", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const isDev = env?.MODE === 'development' || env?.DEV || process?.env?.NODE_ENV === 'developme/", "language": "TypeScript", "kind": "constant", "scope": "useImageDiagnostics", "scopeKind": "function"}, {"_type": "tag", "name": "justName", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^    const justName = src.split('\\/').pop() || '';$/", "language": "TypeScript", "kind": "constant", "scope": "getImageSrc", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const name = src.split('\\/').pop() || '';$/", "language": "TypeScript", "kind": "constant", "scope": "getImageSrc", "scopeKind": "function"}, {"_type": "tag", "name": "useImageDiagnostics", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export function useImageDiagnostics(): boolean {$/", "language": "TypeScript", "kind": "function"}], "hash": "7866ecc2f44dc080c4722350feae02f3", "format-version": 4, "code-base-name": "bookstore_frontend", "filename": "bookstore_frontend/src/utils/imageUtils.ts", "revision_history": [{"122": ""}]}