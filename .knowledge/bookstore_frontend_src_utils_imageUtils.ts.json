{"is_source_file": true, "format": "TypeScript", "description": "This file contains utility functions for handling images in a web application, including resolving image source paths, attaching fallback behavior for failed image loads, and diagnostics mode detection.", "external_files": ["react"], "external_methods": ["React.SyntheticEvent"], "published": ["getImageSrc", "attachFallback", "useImageDiagnostics"], "classes": [], "methods": [{"name": "export function getImageSrc(candidate?: string): string { getImageSrc", "description": "Resolves the image source URL based on input, returning the input if it is a full URL, a relative path, or a filename. Defaults to a placeholder if the input is invalid or not URL-like.", "scope": "", "scopeKind": ""}, {"name": "export function attachFallback(e: React.SyntheticEvent<HTMLImageElement>, originalSrc?: string):/ attachFallback", "description": "Handles image load failures by swapping the image source to a placeholder and logging a warning.", "scope": "", "scopeKind": ""}, {"name": "export function useImageDiagnostics(): boolean { useImageDiagnostics", "description": "Determines if developer diagnostics mode is enabled based on environment variables, allowing for additional UI indicators in development.", "scope": "", "scopeKind": ""}], "calls": ["console.warn"], "search-terms": ["imageUtils", "getImageSrc", "attachFallback", "useImageDiagnostics", "placeholder", "fallback", "diagnostics", "image handling", "React.SyntheticEvent"], "state": 2, "file_id": 21, "knowledge_revision": 133, "git_revision": "b24ed94f10e347023eb1d91cde5d0ad884abf025", "revision_history": [{"122": ""}, {"133": "b24ed94f10e347023eb1d91cde5d0ad884abf025"}], "ctags": [{"_type": "tag", "name": "BOOKS_ASSET_BASE", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export const BOOKS_ASSET_BASE = '\\/assets\\/books\\/';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "PLACEHOLDER_BOOK", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export const PLACEHOLDER_BOOK = 'https:\\/\\/placehold.co\\/480x640?text=Book';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "applied", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const applied = img.getAttribute('data-fallback-applied');$/", "language": "TypeScript", "kind": "constant", "scope": "attachFallback", "scopeKind": "function"}, {"_type": "tag", "name": "attachFallback", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export function attachFallback(e: React.SyntheticEvent<HTMLImageElement>, originalSrc?: string):/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const env = (import.meta as any).env || {};$/", "language": "TypeScript", "kind": "constant", "scope": "useImageDiagnostics", "scopeKind": "function"}, {"_type": "tag", "name": "failing", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^    const failing = originalSrc || img.src;$/", "language": "TypeScript", "kind": "constant", "scope": "attachFallback", "scopeKind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const flags = (env?.REACT_APP_FEATURE_FLAGS as string) || (process?.env?.REACT_APP_FEATURE_FLA/", "language": "TypeScript", "kind": "constant", "scope": "useImageDiagnostics", "scopeKind": "function"}, {"_type": "tag", "name": "getImageSrc", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export function getImageSrc(candidate?: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "hasFileLike", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const hasFileLike = \\/\\\\.[a-z0-9]+$\\/i.test(src);$/", "language": "TypeScript", "kind": "constant", "scope": "getImageSrc", "scopeKind": "function"}, {"_type": "tag", "name": "i", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const hasFileLike = \\/\\\\.[a-z0-9]+$\\/i.test(src);$/", "language": "TypeScript", "kind": "constant", "scope": "getImageSrc", "scopeKind": "function"}, {"_type": "tag", "name": "img", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const img = e.currentTarget;$/", "language": "TypeScript", "kind": "constant", "scope": "attachFallback", "scopeKind": "function"}, {"_type": "tag", "name": "isDev", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const isDev = env?.MODE === 'development' || env?.DEV || process?.env?.NODE_ENV === 'developme/", "language": "TypeScript", "kind": "constant", "scope": "useImageDiagnostics", "scopeKind": "function"}, {"_type": "tag", "name": "src", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^  const src = candidate.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getImageSrc", "scopeKind": "function"}, {"_type": "tag", "name": "useImageDiagnostics", "path": "/home/kavia/workspace/code-generation/legacy-php-bookstore-ui-modernization-217409-217418/bookstore_frontend/src/utils/imageUtils.ts", "pattern": "/^export function useImageDiagnostics(): boolean {$/", "language": "TypeScript", "kind": "function"}], "hash": "a5042b9815dfd37c44fc185d0822ae0d", "format-version": 4, "code-base-name": "bookstore_frontend", "filename": "bookstore_frontend/src/utils/imageUtils.ts"}